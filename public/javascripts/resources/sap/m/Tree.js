/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','./ListBase','./TreeItemBase','./library','sap/ui/core/Element','sap/ui/model/ClientTreeBindingAdapter','sap/ui/model/TreeBindingCompatibilityAdapter','sap/ui/base/ManagedObjectMetadata','sap/ui/model/odata/ODataTreeBinding','sap/ui/model/odata/v2/ODataTreeBinding','sap/ui/model/ClientTreeBinding'],function(q,L,T,l,E,C,a,M,O,V,b){"use strict";var c=L.extend("sap.m.Tree",{metadata:{library:"sap.m"}});c.prototype.isTreeBinding=function(n){return(n=="items");};c.prototype.getBinding=function(n){n=n||"items";var B=L.prototype.getBinding.call(this,n);if(B&&n==="items"&&!B.getLength){if(O&&B instanceof O){a(B,this);}else if(V&&B instanceof V){B.applyAdapterInterface();}else if(b&&B instanceof b){C.apply(B);}else{q.sap.log.error("TreeBinding is not supported for the control "+this);}}return B;};c.prototype.updateItems=function(r){var B=this.getBindingInfo("items"),o=this.getBinding("items"),f=B.factory,d;function u(e,d){var g=e.getItems()||[],h,j;if(g.length>d.length){for(var i=d.length;i<g.length;i++){e.removeItem(g[i]);g[i].destroy("KeepDom");}}for(var i=0;i<d.length;i++){h=d[i];j=g[i];if(j){j.setBindingContext(h,B.model);}else{j=f(e.getId()+"-"+i,h);j.setBindingContext(h,B.model);e.addItem(j);}}}d=o.getContexts(0,Number.MAX_VALUE);if(!B.template){this.destroyItems();}u(this,d);};c.prototype.validateAggregation=function(A,o,m){var r=L.prototype.validateAggregation.apply(this,arguments);if(A==="items"&&!(o instanceof T)){throw new Error(o+" is not a valid items aggregation of "+this+". Items aggregation in Tree control only supports TreeItemBase-based objects, e.g. StandardTreeItem.");}return r;};c.prototype.onItemExpanderPressed=function(i,e){var I=this.indexOfItem(i);var B=this.getBindingInfo("items");if(B&&i&&i.getBindingContext(B.model)){if(e==undefined){this.getBinding("items").toggleIndex(I);}else if(e){this.getBinding("items").expand(I);}else{this.getBinding("items").collapse(I);}}};return c;},true);
